

= provide(:title, 'Edytuj profil')
= provide(:button_text, 'Zapisz zmiany')


.page-wrapper
  .page-header
    %h1
      Edytuj profil


  .container.form-container
    .row.justify-content-md-center
      .form-group.col-md-6

        = form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f|
          = devise_error_messages!


          .field.p-5
            .row
              .col-sm-4
                - if resource.avatar.attached?
                  = image_tag user_avatar(resource, 120), class: 'rounded-circle user-avatar'

              .col-sm-8
                = f.label :avatar, 'Avatar'
                = f.file_field :avatar



          .field
            = f.label :email
            = f.email_field :email, autofocus: true, autocomplete: "email", class: 'form-control'


            - if devise_mapping.confirmable? && resource.pending_reconfirmation?
              %div
                Currently waiting confirmation for:
                = resource.unconfirmed_email


          .field
            = f.label :password, 'Hasło'
            - if @minimum_password_length

              %em
                (Minimum
                = @minimum_password_length
                znaków.)

            = f.password_field :password, autocomplete: "new-password", class: 'form-control', placeholder: '(Pozostaw puste jeśli nie chcesz zmieniać)'



          .field
            = f.label :password_confirmation, 'Potwierdź hasło'
            = f.password_field :password_confirmation, autocomplete: "new-password", class: 'form-control', placeholder: '(Pozostaw puste, jeśli nie chcesz zmieniać)'

          .field
            = f.label :current_password, 'Aktualne hasło'
            %i (Zatwierdź zmiany aktualnym hasłem)

            = f.password_field :current_password, autocomplete: "current-password", class: 'form-control'


          .actions
            = f.submit "Zaktualizuj", class: 'btn btn-do'

        .account-remove.p-2.mt-5

          %h3.text-center Usuń moje konto

          %p
            Ta akcja jest nieodwracalna, konto po usunięciu jest niemożliwe do odzyskania, jak również aplikacja do sojuszu oraz (w przypadku lidera) ogłoszenie klanu.
            = button_to "USUŃ KONTO", registration_path(resource_name), data: { confirm: "Jesteś pewny?" }, method: :delete, class: "btn btn-do"

